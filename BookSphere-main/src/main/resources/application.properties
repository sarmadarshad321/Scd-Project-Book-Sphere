# =============================================
# BookSphere - Application Properties
# =============================================

# Application Name
spring.application.name=BookSphere

# Server Configuration
server.port=8080
server.error.include-message=always
server.error.include-binding-errors=always

# =============================================
# PostgreSQL Database Configuration
# Using environment variables for security
# Set these in .env file (not committed to git)
# =============================================
spring.datasource.url=jdbc:postgresql://${DB_HOST:localhost}:${DB_PORT:5433}/${DB_NAME:library_db}
spring.datasource.username=${DB_USERNAME:mnr}
spring.datasource.password=${DB_PASSWORD:changeme}
spring.datasource.driver-class-name=org.postgresql.Driver

# Connection Pool Settings (HikariCP)
spring.datasource.hikari.connection-timeout=20000
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.max-lifetime=1200000

# =============================================
# JPA / Hibernate Configuration
# =============================================
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect

# Enable Open Session in View (for lazy loading in views)
spring.jpa.open-in-view=true

# =============================================
# Thymeleaf Template Configuration
# =============================================
spring.thymeleaf.prefix=classpath:/templates/
spring.thymeleaf.suffix=.html
spring.thymeleaf.mode=HTML
spring.thymeleaf.encoding=UTF-8
spring.thymeleaf.cache=false

# =============================================
# Static Resources Configuration
# =============================================
spring.web.resources.static-locations=classpath:/static/
spring.mvc.static-path-pattern=/static/**

# =============================================
# Security Configuration
# =============================================
# Session timeout (30 minutes)
server.servlet.session.timeout=30m

# =============================================
# File Upload Configuration
# =============================================
spring.servlet.multipart.enabled=true
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB

# =============================================
# Logging Configuration
# =============================================
logging.level.root=INFO
logging.level.com.library.management=DEBUG
logging.level.org.springframework.security=DEBUG
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE

# Log file configuration
logging.file.name=logs/library-management.log
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %msg%n
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n

# =============================================
# Library-Specific Settings
# =============================================
library.max-borrow-days=14
library.max-books-per-user=5
library.fine-per-day=1.0
library.grace-period-days=0
library.max-reservations-per-user=3
library.reservation-expiry-days=3

# =============================================
# Actuator Configuration (Monitoring)
# =============================================
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=always

# =============================================
# Mail Configuration (Optional - for notifications)
# =============================================
spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=${MAIL_USERNAME:}
spring.mail.password=${MAIL_PASSWORD:}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
